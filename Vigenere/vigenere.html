<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Vigenère Cipher</title>
<style>
body{font-family:Arial;max-width:700px;margin:30px;}
h1{font-size:20px}
label{display:block;margin:8px 0}
input,button{padding:6px;font-size:14px}
#result{margin-top:12px;font-weight:bold}
</style>
</head>
<body>
<h1>Vigenère Cipher</h1>

<label>Chuỗi:
  <input type="text" id="text" size="60" placeholder="Nhập plaintext hoặc ciphertext">
</label>
<label>Khóa:
  <input type="text" id="key" size="30" placeholder="Ví dụ LEMON">
</label>

<button onclick="doEncrypt()">Mã hóa</button>
<button onclick="doDecrypt()">Giải mã</button>

<p id="result"></p>

<script>
function cleanLetters(s){ return s.replace(/[^A-Za-z]/g,'').toUpperCase(); }
function doEncrypt(){
  var pt = cleanLetters(document.getElementById('text').value);
  var key = cleanLetters(document.getElementById('key').value);
  if(!key){ document.getElementById('result').innerText="Nhập khóa!"; return; }
  var out="";
  for(var i=0;i<pt.length;i++){
    var p = pt.charCodeAt(i)-65;
    var k = key.charCodeAt(i % key.length) - 65;
    out += String.fromCharCode((p+k)%26 + 65);
  }
  document.getElementById('result').innerText = "Bản mã: " + out;
}
function doDecrypt(){
  var ct = cleanLetters(document.getElementById('text').value);
  var key = cleanLetters(document.getElementById('key').value);
  if(!key){ document.getElementById('result').innerText="Nhập khóa!"; return; }
  var out="";
  for(var i=0;i<ct.length;i++){
    var c = ct.charCodeAt(i)-65;
    var k = key.charCodeAt(i % key.length) - 65;
    out += String.fromCharCode((c-k+26)%26 + 65);
  }
  document.getElementById('result').innerText = "Giải mã: " + out;
}
</script>
</body>
</html>
